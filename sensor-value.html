<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../sensor-base/sensor-base.html">
<link rel="import" href="../leaf-scale/leaf-scale.html">

<polymer-element name="sensor-value" attributes="icon qualityScale mini" extends="sensor-base">
	<template>
		<style>
			:host{
				display: flex;
				flex-direction: row;

				align-items: center;

				font-size: 1.7em;

				overflow: hidden;
			}

			p#minilabel{
				margin: 0px;
				margin-bottom: 20px;
				font-size: 2em;
				color: white;
				text-shadow: 2px 2px #000;
			}

			div#minivalue{
				width: 150px;
				height: 110px;
				text-align: center;
				background-repeat: no-repeat;
				background-position: center;

				display: flex;
				justify-content: center;
				align-items: center;
				color: white;
				text-shadow: 1px 1px #000;
			}

			#icon{
				display: block;
				height: 220px;
			}

			#value{
				display: flex;
				flex-direction: column;
				color: white;
				text-shadow: 1px 1px #000;
			}

			#value h1{
				margin-top: 0px;
				margin-bottom: 0px;
			}

			#value p{
				margin: 5px;
				font-size: 2em;
			}

			#big{
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;
			}

			#sensor{
				display: flex;
				align-items: center;
				justify-content: center;
			}

			leaf-scale{
				border-top: 1px solid lightgray;
				padding-top: 20px;
				margin-top: 20px;
			}


		</style>

		<template if="{{mini}}">
			<p id="minilabel">{{label}}</p>
			<div id="minivalue" style="background-image: url('bower_components/sensor-value/icons/{{icon?icon:name}}.png')">
				<p>{{value}} {{unit}}<p>
			</div>
		</template>

		<template if="{{!mini}}">
			<div id="big">
				<div id="sensor">
					<img id="icon" src="bower_components/sensor-value/icons/{{icon?icon:name}}Big.png" />
					<div id="value">
						<h1>{{label}}</h1>
						<p>{{value}} {{unit}}</p>
					</div>
				</div>
				<template if="{{qualityScale}}">
					<leaf-scale id="scale" leafCount="3" level="{{quality*leafCount}}"></leaf-scale>
				</template>
			</div>
		</template>

	</template>
	<script>
		Polymer({

			mini: false,
			leafCount: 4,
			icon: null,
			qualityScale: false,

			ready: function(){
				this.super();
				var scale = this.shadowRoot.querySelector('leaf-scale');

				if(scale){
					scale.setLevel(3);
				}
			}
		})
	</script>
</polymer-element>
